<th:block id="checkboxes-content" th:fragment="singleCheckbox(label, fieldName, hint, options)"
          th:replace="~{fragments/forms/inputGroup :: inputGroup(${label}, ${fieldName}, ~{::#checkboxes-content/content()}, ${hint})}"
          xmlns="http://www.w3.org/1999/html">
    <div class="govuk-checkboxes" data-module="govuk-checkboxes">
        <th:block th:each="option: ${options}" th:with="checkboxInputID=|${fieldName}-${option.valueStr}|, conditionalFragmentID=|${fieldName}-${option.valueStr}-conditional|">
            <div class="govuk-checkboxes__item">
                <input class="govuk-checkboxes__input" type="checkbox"
                       th:field="*{__${fieldName}__}" th:value="${option.value}" th:id="${checkboxInputID}"
                       th:attr="data-aria-controls=${option.conditionalFragment != null} ? ${conditionalFragmentID}">
                <label class="govuk-label govuk-checkboxes__label" th:for="${checkboxInputID}"
                       th:text="${option.labelMsgKey != null ? #messages.msg(option.labelMsgKey) : option.value}">
                    Option Label
                </label>
            </div>
            <div th:if="${option.conditionalFragment}" class="govuk-checkboxes__conditional govuk-checkboxes__conditional--hidden" th:id="${conditionalFragmentID}" th:with="fragmentCall=|fragments/conditional/${option.conditionalFragment}|">
                <th:block th:replace="~{__${fragmentCall}__ :: ${option.conditionalFragment}}"></th:block>
            </div>
        </th:block>
    </div>
</th:block>